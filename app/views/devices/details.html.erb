<h1>Device Configuration</h1>
<%= form_tag('/' + @id + '/devices/update_details/' + @device_id, method: 'post') do %>
<h3>System</h3>
<table>
  <tbody>
  <tr>
    <td>
      Device Name
    </td>
    <td>
      <%= text_field_tag(:device_name, @device_name, maxlength: 100) %>
    </td>
  </tr>
  <tr>
    <td>
      Serial Number
    </td>
    <td>
      <%= @device_id %>
    </td>
  </tr>
  <tr>
    <td>
      Configuration Status
    </td>
    <td>
      <%= @device_changes_pending ? 'Configuration changes are pending.' : 'Configuration is up to date.' %>
    </td>
  </tr>
  <tr>
    <td>
      Controls
    </td>
    <td>
      <%= submit_tag 'Reboot', data: { confirm: 'Are you sure you want to reboot the device?' } %>
      <%= submit_tag 'Power Off', data: { confirm: 'Are you sure you want to power the device off?' } %>
    </td>
  </tr>
  </tbody>
</table>
<h3>Capture Configuration</h3>
<table>
  <tbody>
  <tr>
    <td>
      Sampling Frequency
    </td>
    <td>
      <%= text_field_tag(:sampling_frequency, @sampling_frequency, maxlength: 20) %>
    </td>
  </tr>
  <tr>
    <td>Sensor Names</td>
    <td>
      <table>
        <tbody>
          <% @sensor_names.each {|sensor| %>
          <tr>
            <td><%= sensor %></td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </td>
  </tr>
  <tr>
    <td>Sensor Bindings</td>
    <td>
        <table>
          <thead>
          <tr>
            <th>Sensor Name</th>
            <th>Sensor Binding</th>
          </tr>
          </thead>
          <tbody>
            <% @sensor_bindings.each { |name, binding| %>
            <tr>
              <td><%= name %></td>
              <td><%= select_tag name, options_for_select(
                  @sensor_binding_sites,
                  selected=@sensor_binding_sites.include?(binding) ? binding : 'None') %></td>
            </tr>
            <% } %>
          </tbody>
        </table>
    </td>
  </tr>
  </tbody>
</table>
<%= submit_tag 'Save Changes', :name => 'save' %>
<% end %>